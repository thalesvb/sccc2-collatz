<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Home</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Home</h1>

    



    


    <h3>@thalesvb/sccc.collatz 0.0.1</h3>










    




    <section>
        <article><h1>SAP Community Coding Challenge #2: Collatz Conjecture</h1>
<p>This is a submission to <a href="https://blogs.sap.com/2020/04/27/sap-community-coding-challenge-nr.2/">SAP Community Coding Challenge #2</a>.</p>
<p>There are four implementations provided:</p>
<h2>Synchronous</h2>
<p>Plain good ol' single thread implementation.
This is the faster, memory friendly.</p>
<h2>Functional</h2>
<p>A more functional syntax approaching.
It is more declarative, breaking the problem into small parts to be solved.
First attempt with Ramda, so there are things that could be better.</p>
<h2>Asynchronous</h2>
<p>This is an async implementation based on shared buffer between workers.
I already knew that asynchronous would perform worse, because of
worker implied overhead, waiting for previous calculated data be resolved.</p>
<p>The main reason to still do it is refresh some concepts (and remember bottlenecks), recheck some JSDoc flaws and also try other things.
The code mainly:</p>
<ul>
<li>Uses Workers to distribute workload.</li>
<li>Relies on <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Atomics">Atomics</a> to control data dependency, stalling worker thread until calculation for required data chain is done.</li>
<li>Dropped Node modules syntax to use ES6 one, since it looks like TypeScript (which I uses more whenever need to code JS-like).</li>
</ul>
<p>From first to last interaction, it had a improvement of:</p>
<ul>
<li>8x speed up.</li>
<li>50% less memory usage.</li>
</ul>
<p>But is still 3x slower and way more memory intensive than Synchronous code.
There is margin to squeeze more, but is enough for now.</p>
<h2>WebAssembly (Experimental)</h2>
<p>Because why not? Actually compiled from C code.
It is a simple code, eventually you'll find overflow erros (wrong answers when checking above 1000000)
You need to compile collatz.c to collatz.wasm first before using this run type.</p>
<h2>How to run</h2>
<p>Synhronous:</p>
<pre class="prettyprint source lang-Shell"><code>npm start
</code></pre>
<p>Asynchronous:</p>
<pre class="prettyprint source lang-Shell"><code>npm start -- -r async
</code></pre>
<p>Functional:</p>
<pre class="prettyprint source lang-Shell"><code>npm start -- -r functional
</code></pre>
<p>WebAssembly:</p>
<pre class="prettyprint source lang-Shell"><code>npm start -- -r wasm
</code></pre>
<p>Change upper limit to investigate</p>
<pre class="prettyprint source lang-Shell"><code>npm start -- -l &lt;upperLimit>
</code></pre>
<h2>Observations</h2>
<p>There were a few problems to create a online runnable demo because of ES6 modules syntax (they almost enforces Node syntax), even with <code>&quot;type&quot;: &quot;module&quot;</code> on <code>package.json</code>.
ESM module comes to the rescue!</p></article>
    </section>






</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Externals</h3><ul><li><a href="external-SharedArrayBuffer.html">SharedArrayBuffer</a></li></ul><h3>Classes</h3><ul><li><a href="CacheAsync.html">CacheAsync</a></li><li><a href="CacheBuilder.html">CacheBuilder</a></li><li><a href="CacheSync.html">CacheSync</a></li><li><a href="CollatzAsync.html">CollatzAsync</a></li><li><a href="CollatzAsyncWorker.html">CollatzAsyncWorker</a></li><li><a href="CollatzDynProg.html">CollatzDynProg</a></li><li><a href="CollatzFactory.html">CollatzFactory</a></li><li><a href="CollatzFunctional.html">CollatzFunctional</a></li><li><a href="CollatzSync.html">CollatzSync</a></li><li><a href="CollatzWasm.html">CollatzWasm</a></li><li><a href="Monitor.html">Monitor</a></li></ul><h3>Interfaces</h3><ul><li><a href="Cache.html">Cache</a></li><li><a href="CollatzConjecture.html">CollatzConjecture</a></li></ul><h3>Global</h3><ul><li><a href="global.html#buildChainDetailsType">buildChainDetailsType</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>